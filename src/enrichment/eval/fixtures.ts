import type { GitHubUserProfile } from "../../github/types.js";
import type { EnrichedProfile } from "../types.js";

export interface EvalFixture {
  name: string;
  description: string;
  input: GitHubUserProfile;
  candidateEmails?: string[];
  expected: EnrichedProfile;
}

export const fixtures: EvalFixture[] = [
  {
    name: "mtodd",
    description: "GitHub staff engineer with company, location, blog, and bio mentioning role",
    input: {
      id: 182,
      login: "mtodd",
      name: "Matt Todd",
      bio: "Principal Engineer @github. Ruby/Go mostly. Perpetual student.",
      location: "Philadelphia, PA",
      company: "GitHub",
      blog: "http://maraby.org/",
      twitter_username: null,
      email: null,
      public_repos: 162,
      followers: 929,
      following: 519,
      created_at: "2008-02-11T06:28:43Z",
      updated_at: "2025-12-06T00:26:43Z",
    },
    expected: {
      country: "United States",
      employers: [{ name: "GitHub", current: true }],
      linkedin_url: null,
      website_url: "http://maraby.org/",
      university: null,
      email: null,
    },
  },

  {
    name: "emilwidlund",
    description: "Swedish developer with multiple companies, previous employer, no blog",
    input: {
      id: 10053249,
      login: "emilwidlund",
      name: "Emil Widlund",
      bio: "Creative Technologist. Founding Design Engineer at @polarsource. Founder of @newfrgmnt. Previously at EA.",
      location: "Sweden",
      company: "@polarsource & @newfrgmnt",
      blog: "",
      twitter_username: "emilwidlund",
      email: null,
      public_repos: 27,
      followers: 487,
      following: 63,
      created_at: "2014-12-02T22:16:17Z",
      updated_at: "2025-12-09T10:26:14Z",
    },
    expected: {
      country: "Sweden",
      employers: [
        { name: "polarsource", current: true },
        { name: "newfrgmnt", current: true },
        { name: "EA", current: false },
      ],
      linkedin_url: null,
      website_url: null,
      university: null,
      email: null,
    },
  },

  {
    name: "sindresorhus",
    description: "Prolific OSS developer with website, no location or company",
    input: {
      id: 170270,
      login: "sindresorhus",
      name: "Sindre Sorhus",
      bio: "Full-Time Open-Sourcerer. Focused on Swift & JavaScript. Makes macOS apps, CLI tools, npm packages.",
      location: null,
      company: null,
      blog: "https://sindresorhus.com/apps",
      twitter_username: "sindresorhus",
      email: null,
      public_repos: 1129,
      followers: 76284,
      following: 31,
      created_at: "2009-12-20T22:57:02Z",
      updated_at: "2025-12-04T00:00:00Z",
    },
    expected: {
      country: null,
      employers: [],
      linkedin_url: null,
      website_url: "https://sindresorhus.com/apps",
      university: null,
      email: null,
    },
  },

  {
    name: "gaearon",
    description: "Well-known developer with minimal profile info, only blog",
    input: {
      id: 810438,
      login: "gaearon",
      name: "dan",
      bio: null,
      location: null,
      company: null,
      blog: "https://tangled.org/@danabra.mov",
      twitter_username: null,
      email: null,
      public_repos: 289,
      followers: 90097,
      following: 174,
      created_at: "2011-05-25T18:18:31Z",
      updated_at: "2025-12-03T12:27:56Z",
    },
    expected: {
      country: null,
      employers: [],
      linkedin_url: null,
      website_url: "https://tangled.org/@danabra.mov",
      university: null,
      email: null,
    },
  },

  {
    name: "getify",
    description: "Author and educator with own company, Austin location, hireable, personal blog",
    input: {
      id: 150330,
      login: "getify",
      name: "Kyle Simpson",
      bio: "Kyle Simpson is a Human-Centric Technologist. He's fighting for the people behind the pixels.",
      location: "Austin, TX",
      company: "Getify Solutions",
      blog: "http://getify.me",
      twitter_username: null,
      email: null,
      public_repos: 74,
      followers: 44949,
      following: 2,
      created_at: "2009-11-08T06:56:21Z",
      updated_at: "2025-12-01T16:41:50Z",
    },
    expected: {
      country: "United States",
      employers: [{ name: "Getify Solutions", current: true }],
      linkedin_url: null,
      website_url: "http://getify.me",
      university: null,
      email: null,
    },
  },

  {
    name: "tj",
    description: "Minimal profile with just company name, no bio or location",
    input: {
      id: 25254,
      login: "tj",
      name: "TJ",
      bio: null,
      location: null,
      company: "Apex",
      blog: "",
      twitter_username: null,
      email: null,
      public_repos: 296,
      followers: 51444,
      following: 45,
      created_at: "2008-09-18T22:37:28Z",
      updated_at: "2025-03-06T12:26:13Z",
    },
    expected: {
      country: null,
      employers: [{ name: "Apex", current: true }],
      linkedin_url: null,
      website_url: null,
      university: null,
      email: null,
    },
  },

  {
    name: "fabpot",
    description: "French developer with dual roles (Founder + CTO), Paris location, personal blog",
    input: {
      id: 47313,
      login: "fabpot",
      name: "Fabien Potencier",
      bio: "Founder and project lead at Symfony\r\nCTO at Upsun",
      location: "Paris, France",
      company: "Symfony/Upsun",
      blog: "http://fabien.potencier.org/",
      twitter_username: "fabpot",
      email: null,
      public_repos: 80,
      followers: 13331,
      following: 0,
      created_at: "2009-01-17T13:42:51Z",
      updated_at: "2025-10-27T06:33:00Z",
    },
    expected: {
      country: "France",
      employers: [
        { name: "Symfony", current: true },
        { name: "Upsun", current: true },
      ],
      linkedin_url: null,
      website_url: "http://fabien.potencier.org/",
      university: null,
      email: null,
    },
  },

  // Email extraction test cases
  {
    name: "email-exact-match",
    description: "Email matching with exact username match in candidate emails",
    input: {
      id: 1001,
      login: "johndoe",
      name: "John Doe",
      bio: "Software Engineer",
      location: "New York",
      company: "Acme Inc",
      blog: "",
      twitter_username: null,
      email: null,
      public_repos: 50,
      followers: 100,
      following: 50,
      created_at: "2020-01-01T00:00:00Z",
      updated_at: "2024-01-01T00:00:00Z",
    },
    candidateEmails: ["johndoe@gmail.com", "random@company.com", "other@test.org"],
    expected: {
      country: "United States",
      employers: [{ name: "Acme Inc", current: true }],
      linkedin_url: null,
      website_url: null,
      university: null,
      email: "johndoe@gmail.com",
    },
  },

  {
    name: "email-name-match",
    description: "Email matching based on full name similarity",
    input: {
      id: 1002,
      login: "jsmith42",
      name: "Jane Smith",
      bio: "Backend Developer",
      location: "London, UK",
      company: "TechCorp",
      blog: "",
      twitter_username: null,
      email: null,
      public_repos: 30,
      followers: 200,
      following: 100,
      created_at: "2019-01-01T00:00:00Z",
      updated_at: "2024-01-01T00:00:00Z",
    },
    candidateEmails: ["jane.smith@techcorp.com", "admin@techcorp.com", "support@techcorp.com"],
    expected: {
      country: "United Kingdom",
      employers: [{ name: "TechCorp", current: true }],
      linkedin_url: null,
      website_url: null,
      university: null,
      email: "jane.smith@techcorp.com",
    },
  },

  {
    name: "email-no-match",
    description: "No confident email match from candidates",
    input: {
      id: 1003,
      login: "devuser123",
      name: "Alex Developer",
      bio: "Full-stack dev",
      location: "Berlin",
      company: null,
      blog: "",
      twitter_username: null,
      email: null,
      public_repos: 20,
      followers: 50,
      following: 30,
      created_at: "2021-01-01T00:00:00Z",
      updated_at: "2024-01-01T00:00:00Z",
    },
    candidateEmails: ["randomuser@gmail.com", "test@example.com"],
    expected: {
      country: "Germany",
      employers: [],
      linkedin_url: null,
      website_url: null,
      university: null,
      email: null,
    },
  },

  {
    name: "email-from-profile",
    description: "Email directly from profile (no candidate lookup needed)",
    input: {
      id: 1004,
      login: "publicdev",
      name: "Public Developer",
      bio: "Open source contributor",
      location: "San Francisco",
      company: "OpenSource Co",
      blog: "https://publicdev.io",
      twitter_username: "publicdev",
      email: "hello@publicdev.io",
      public_repos: 100,
      followers: 500,
      following: 200,
      created_at: "2018-01-01T00:00:00Z",
      updated_at: "2024-01-01T00:00:00Z",
    },
    expected: {
      country: "United States",
      employers: [{ name: "OpenSource Co", current: true }],
      linkedin_url: null,
      website_url: "https://publicdev.io",
      university: null,
      email: "hello@publicdev.io",
    },
  },
];
