import type { GitHubUserProfile } from "../../github/types.js";
import type { EnrichedProfile } from "../types.js";

export interface EvalFixture {
  name: string;
  description: string;
  input: GitHubUserProfile;
  candidateEmails?: string[];
  expected: EnrichedProfile;
}

export const fixtures: EvalFixture[] = [
  {
    name: "mtodd",
    description: "GitHub staff engineer with company, location, blog, and bio mentioning role",
    input: {
      id: 182,
      login: "mtodd",
      name: "Matt Todd",
      bio: "Principal Engineer @github. Ruby/Go mostly. Perpetual student.",
      location: "Philadelphia, PA",
      company: "GitHub",
      blog: "http://maraby.org/",
      twitter_username: null,
      email: null,
      public_repos: 162,
      followers: 929,
      following: 519,
      created_at: "2008-02-11T06:28:43Z",
      updated_at: "2025-12-06T00:26:43Z",
    },
    expected: {
      country: "US",
      employers: [{ name: "GitHub", current: true }],
      linkedin_url: null,
      website_url: "http://maraby.org/",
      university: null,
      email: null,
    },
  },

  {
    name: "emilwidlund",
    description: "Swedish developer with multiple companies, previous employer, no blog",
    input: {
      id: 10053249,
      login: "emilwidlund",
      name: "Emil Widlund",
      bio: "Creative Technologist. Founding Design Engineer at @polarsource. Founder of @newfrgmnt. Previously at EA.",
      location: "Sweden",
      company: "@polarsource & @newfrgmnt",
      blog: "",
      twitter_username: "emilwidlund",
      email: null,
      public_repos: 27,
      followers: 487,
      following: 63,
      created_at: "2014-12-02T22:16:17Z",
      updated_at: "2025-12-09T10:26:14Z",
    },
    expected: {
      country: "Sweden",
      employers: [
        { name: "polarsource", current: true },
        { name: "newfrgmnt", current: true },
        { name: "EA", current: false },
      ],
      linkedin_url: null,
      website_url: null,
      university: null,
      email: null,
    },
  },

  {
    name: "sindresorhus",
    description: "Prolific OSS developer with website, no location or company",
    input: {
      id: 170270,
      login: "sindresorhus",
      name: "Sindre Sorhus",
      bio: "Full-Time Open-Sourcerer. Focused on Swift & JavaScript. Makes macOS apps, CLI tools, npm packages.",
      location: null,
      company: null,
      blog: "https://sindresorhus.com/apps",
      twitter_username: "sindresorhus",
      email: null,
      public_repos: 1129,
      followers: 76284,
      following: 31,
      created_at: "2009-12-20T22:57:02Z",
      updated_at: "2025-12-04T00:00:00Z",
    },
    expected: {
      country: null,
      employers: [],
      linkedin_url: null,
      website_url: "https://sindresorhus.com/apps",
      university: null,
      email: null,
    },
  },

  {
    name: "gaearon",
    description: "Well-known developer with minimal profile info, only blog",
    input: {
      id: 810438,
      login: "gaearon",
      name: "dan",
      bio: null,
      location: null,
      company: null,
      blog: "https://tangled.org/@danabra.mov",
      twitter_username: null,
      email: null,
      public_repos: 289,
      followers: 90097,
      following: 174,
      created_at: "2011-05-25T18:18:31Z",
      updated_at: "2025-12-03T12:27:56Z",
    },
    expected: {
      country: null,
      employers: [],
      linkedin_url: null,
      website_url: "https://tangled.org/@danabra.mov",
      university: null,
      email: null,
    },
  },

  {
    name: "getify",
    description: "Author and educator with own company, Austin location, hireable, personal blog",
    input: {
      id: 150330,
      login: "getify",
      name: "Kyle Simpson",
      bio: "Kyle Simpson is a Human-Centric Technologist. He's fighting for the people behind the pixels.",
      location: "Austin, TX",
      company: "Getify Solutions",
      blog: "http://getify.me",
      twitter_username: null,
      email: null,
      public_repos: 74,
      followers: 44949,
      following: 2,
      created_at: "2009-11-08T06:56:21Z",
      updated_at: "2025-12-01T16:41:50Z",
    },
    expected: {
      country: "US",
      employers: [{ name: "Getify Solutions", current: true }],
      linkedin_url: null,
      website_url: "http://getify.me",
      university: null,
      email: null,
    },
  },

  {
    name: "tj",
    description: "Minimal profile with just company name, no bio or location",
    input: {
      id: 25254,
      login: "tj",
      name: "TJ",
      bio: null,
      location: null,
      company: "Apex",
      blog: "",
      twitter_username: null,
      email: null,
      public_repos: 296,
      followers: 51444,
      following: 45,
      created_at: "2008-09-18T22:37:28Z",
      updated_at: "2025-03-06T12:26:13Z",
    },
    expected: {
      country: null,
      employers: [{ name: "Apex", current: true }],
      linkedin_url: null,
      website_url: null,
      university: null,
      email: null,
    },
  },

  {
    name: "fabpot",
    description: "French developer with dual roles (Founder + CTO), Paris location, personal blog",
    input: {
      id: 47313,
      login: "fabpot",
      name: "Fabien Potencier",
      bio: "Founder and project lead at Symfony\r\nCTO at Upsun",
      location: "Paris, France",
      company: "Symfony/Upsun",
      blog: "http://fabien.potencier.org/",
      twitter_username: "fabpot",
      email: null,
      public_repos: 80,
      followers: 13331,
      following: 0,
      created_at: "2009-01-17T13:42:51Z",
      updated_at: "2025-10-27T06:33:00Z",
    },
    expected: {
      country: "France",
      employers: [
        { name: "Symfony", current: true },
        { name: "Upsun", current: true },
      ],
      linkedin_url: null,
      website_url: "http://fabien.potencier.org/",
      university: null,
      email: null,
    },
  },

  // Email extraction test cases
  {
    name: "email-exact-match",
    description: "Email matching with exact username match in candidate emails",
    input: {
      id: 1001,
      login: "johndoe",
      name: "John Doe",
      bio: "Software Engineer",
      location: "New York",
      company: "Acme Inc",
      blog: "",
      twitter_username: null,
      email: null,
      public_repos: 50,
      followers: 100,
      following: 50,
      created_at: "2020-01-01T00:00:00Z",
      updated_at: "2024-01-01T00:00:00Z",
    },
    candidateEmails: ["johndoe@gmail.com", "random@company.com", "other@test.org"],
    expected: {
      country: "US",
      employers: [{ name: "Acme Inc", current: true }],
      linkedin_url: null,
      website_url: null,
      university: null,
      email: "johndoe@gmail.com",
    },
  },

  {
    name: "email-name-match",
    description: "Email matching based on full name similarity",
    input: {
      id: 1002,
      login: "jsmith42",
      name: "Jane Smith",
      bio: "Backend Developer",
      location: "London, UK",
      company: "TechCorp",
      blog: "",
      twitter_username: null,
      email: null,
      public_repos: 30,
      followers: 200,
      following: 100,
      created_at: "2019-01-01T00:00:00Z",
      updated_at: "2024-01-01T00:00:00Z",
    },
    candidateEmails: ["jane.smith@techcorp.com", "admin@techcorp.com", "support@techcorp.com"],
    expected: {
      country: "UK",
      employers: [{ name: "TechCorp", current: true }],
      linkedin_url: null,
      website_url: null,
      university: null,
      email: "jane.smith@techcorp.com",
    },
  },

  {
    name: "email-no-match",
    description: "No confident email match from candidates",
    input: {
      id: 1003,
      login: "devuser123",
      name: "Alex Developer",
      bio: "Full-stack dev",
      location: "Berlin",
      company: null,
      blog: "",
      twitter_username: null,
      email: null,
      public_repos: 20,
      followers: 50,
      following: 30,
      created_at: "2021-01-01T00:00:00Z",
      updated_at: "2024-01-01T00:00:00Z",
    },
    candidateEmails: ["randomuser@gmail.com", "test@example.com"],
    expected: {
      country: "Germany",
      employers: [],
      linkedin_url: null,
      website_url: null,
      university: null,
      email: null,
    },
  },

  {
    name: "email-from-profile",
    description: "Email directly from profile (no candidate lookup needed)",
    input: {
      id: 1004,
      login: "publicdev",
      name: "Public Developer",
      bio: "Open source contributor",
      location: "San Francisco",
      company: "OpenSource Co",
      blog: "https://publicdev.io",
      twitter_username: "publicdev",
      email: "hello@publicdev.io",
      public_repos: 100,
      followers: 500,
      following: 200,
      created_at: "2018-01-01T00:00:00Z",
      updated_at: "2024-01-01T00:00:00Z",
    },
    expected: {
      country: "US",
      employers: [{ name: "OpenSource Co", current: true }],
      linkedin_url: null,
      website_url: "https://publicdev.io",
      university: null,
      email: "hello@publicdev.io",
    },
  },

  // Country detection and standardization test cases
  {
    name: "country-japanese-bio",
    description: "Japanese language bio should infer Japan",
    input: {
      id: 2001,
      login: "tanaka_dev",
      name: "田中太郎",
      bio: "Webエンジニア。React と TypeScript が好きです。趣味はゲーム開発。",
      location: null,
      company: null,
      blog: "",
      twitter_username: null,
      email: null,
      public_repos: 42,
      followers: 120,
      following: 80,
      created_at: "2020-03-15T00:00:00Z",
      updated_at: "2024-01-01T00:00:00Z",
    },
    expected: {
      country: "Japan",
      employers: [],
      linkedin_url: null,
      website_url: null,
      university: null,
      email: null,
    },
  },

  {
    name: "country-simplified-chinese-bio",
    description: "Simplified Chinese bio should infer China",
    input: {
      id: 2002,
      login: "wang_developer",
      name: "王小明",
      bio: "全栈开发工程师，专注于前端技术和云计算。热爱开源。",
      location: null,
      company: "阿里巴巴",
      blog: "",
      twitter_username: null,
      email: null,
      public_repos: 65,
      followers: 230,
      following: 110,
      created_at: "2019-06-20T00:00:00Z",
      updated_at: "2024-01-01T00:00:00Z",
    },
    expected: {
      country: "China",
      employers: [{ name: "阿里巴巴", current: true }],
      linkedin_url: null,
      website_url: null,
      university: null,
      email: null,
    },
  },

  {
    name: "country-traditional-chinese-bio",
    description: "Traditional Chinese bio should infer Taiwan",
    input: {
      id: 2003,
      login: "chen_coder",
      name: "陳大華",
      bio: "軟體工程師，專注於機器學習與資料科學。喜歡探索新技術。",
      location: null,
      company: null,
      blog: "",
      twitter_username: null,
      email: null,
      public_repos: 38,
      followers: 95,
      following: 45,
      created_at: "2021-02-10T00:00:00Z",
      updated_at: "2024-01-01T00:00:00Z",
    },
    expected: {
      country: "Taiwan",
      employers: [],
      linkedin_url: null,
      website_url: null,
      university: null,
      email: null,
    },
  },

  {
    name: "country-korean-bio",
    description: "Korean language bio should infer South Korea",
    input: {
      id: 2004,
      login: "kim_developer",
      name: "김민수",
      bio: "백엔드 개발자입니다. Java와 Spring을 주로 사용합니다.",
      location: null,
      company: "네이버",
      blog: "",
      twitter_username: null,
      email: null,
      public_repos: 52,
      followers: 180,
      following: 90,
      created_at: "2020-08-05T00:00:00Z",
      updated_at: "2024-01-01T00:00:00Z",
    },
    expected: {
      country: "South Korea",
      employers: [{ name: "네이버", current: true }],
      linkedin_url: null,
      website_url: null,
      university: null,
      email: null,
    },
  },

  {
    name: "country-abbreviation-usa",
    description: "USA location should standardize to US",
    input: {
      id: 2005,
      login: "american_dev",
      name: "John American",
      bio: "Software engineer",
      location: "USA",
      company: null,
      blog: "",
      twitter_username: null,
      email: null,
      public_repos: 30,
      followers: 75,
      following: 50,
      created_at: "2022-01-15T00:00:00Z",
      updated_at: "2024-01-01T00:00:00Z",
    },
    expected: {
      country: "US",
      employers: [],
      linkedin_url: null,
      website_url: null,
      university: null,
      email: null,
    },
  },

  {
    name: "country-abbreviation-tw",
    description: "TW location should standardize to Taiwan",
    input: {
      id: 2006,
      login: "taiwan_developer",
      name: "Lin Developer",
      bio: "Frontend engineer",
      location: "TW",
      company: null,
      blog: "",
      twitter_username: null,
      email: null,
      public_repos: 25,
      followers: 60,
      following: 40,
      created_at: "2021-09-20T00:00:00Z",
      updated_at: "2024-01-01T00:00:00Z",
    },
    expected: {
      country: "Taiwan",
      employers: [],
      linkedin_url: null,
      website_url: null,
      university: null,
      email: null,
    },
  },

  {
    name: "country-england-to-uk",
    description: "England location should standardize to UK",
    input: {
      id: 2007,
      login: "british_coder",
      name: "James Smith",
      bio: "Full-stack developer",
      location: "England",
      company: null,
      blog: "",
      twitter_username: null,
      email: null,
      public_repos: 45,
      followers: 130,
      following: 70,
      created_at: "2020-05-10T00:00:00Z",
      updated_at: "2024-01-01T00:00:00Z",
    },
    expected: {
      country: "UK",
      employers: [],
      linkedin_url: null,
      website_url: null,
      university: null,
      email: null,
    },
  },

  {
    name: "country-city-only",
    description: "Well-known city should infer country",
    input: {
      id: 2008,
      login: "tokyo_dev",
      name: "Sato Developer",
      bio: "Backend engineer working with Go and Kubernetes",
      location: "Tokyo",
      company: null,
      blog: "",
      twitter_username: null,
      email: null,
      public_repos: 55,
      followers: 200,
      following: 100,
      created_at: "2019-11-25T00:00:00Z",
      updated_at: "2024-01-01T00:00:00Z",
    },
    expected: {
      country: "Japan",
      employers: [],
      linkedin_url: null,
      website_url: null,
      university: null,
      email: null,
    },
  },

  {
    name: "country-singapore-abbrev",
    description: "Singapore abbreviation SG should expand to full name",
    input: {
      id: 2009,
      login: "singapore_dev",
      name: "Tan Developer",
      bio: "DevOps engineer",
      location: "SG",
      company: null,
      blog: "",
      twitter_username: null,
      email: null,
      public_repos: 35,
      followers: 85,
      following: 55,
      created_at: "2021-07-12T00:00:00Z",
      updated_at: "2024-01-01T00:00:00Z",
    },
    expected: {
      country: "Singapore",
      employers: [],
      linkedin_url: null,
      website_url: null,
      university: null,
      email: null,
    },
  },

  {
    name: "country-mixed-signals",
    description: "Multiple country signals - location should take priority",
    input: {
      id: 2010,
      login: "expat_dev",
      name: "Yamada Taro",
      bio: "Software engineer originally from Japan, now in Berlin",
      location: "Berlin, Germany",
      company: null,
      blog: "",
      twitter_username: null,
      email: null,
      public_repos: 48,
      followers: 150,
      following: 80,
      created_at: "2020-04-18T00:00:00Z",
      updated_at: "2024-01-01T00:00:00Z",
    },
    expected: {
      country: "Germany",
      employers: [],
      linkedin_url: null,
      website_url: null,
      university: null,
      email: null,
    },
  },
];
